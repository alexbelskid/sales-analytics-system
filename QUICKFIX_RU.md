# üîß –ö–†–ê–¢–ö–û–ï –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ

## –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

‚ùå **–û—à–∏–±–∫–∞**: `column reference "total_revenue" is ambiguous`

## –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Supabase SQL Editor

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ:
```
https://app.supabase.com/project/hnunemnxpmyhexzcvmtb/sql
```

### –®–∞–≥ 2: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ SQL

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª: `database/create_analytics_functions.sql`

–ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
python scripts/fix_rpc_quick.py
```
–°–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å SQL –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞.

### –®–∞–≥ 3: –í—Å—Ç–∞–≤—å—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ

1. –í—Å—Ç–∞–≤—å—Ç–µ SQL –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä Supabase
2. –ù–∞–∂–º–∏—Ç–µ `Run` –∏–ª–∏ `Ctrl/Cmd + Enter`
3. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è "Success"

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend

```bash
./stop.sh
./start.sh
```

–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ:
```bash
./scripts/diagnose.sh
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –æ—à–∏–±–∫–∞ –≤ `backend.log` –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å.

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:
```bash
curl "http://localhost:8000/api/analytics/top-products?limit=5"
```

## –ß—Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è

‚úÖ 3 RPC-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:
- `get_top_products_by_sales()` - —Ç–æ–ø —Ç–æ–≤–∞—Ä–æ–≤
- `get_top_customers_by_revenue()` - —Ç–æ–ø –∫–ª–∏–µ–Ω—Ç–æ–≤  
- `get_sales_trend()` - —Ç—Ä–µ–Ω–¥—ã –ø—Ä–æ–¥–∞–∂

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

üìö –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ: `docs/FIX_ANALYTICS_RPC.md`

---

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~5 –º–∏–Ω—É—Ç  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –õ—ë–≥–∫–∞—è ‚≠ê  
**–¢—Ä–µ–±—É–µ—Ç—Å—è**: –î–æ—Å—Ç—É–ø –∫ Supabase Dashboard
