@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        /* ============================================
           UNIFIED DESIGN SYSTEM - COLOR TOKENS
           All colors are centralized here for consistency
           ============================================ */
        
        /* Background Colors */
        --background: 0 0% 4%;              /* #0A0A0A - Main app background */
        --background-secondary: 0 0% 8%;    /* #141414 - Card/panel background */
        --background-tertiary: 0 0% 12%;    /* #1F1F1F - Muted elements */
        --background-hover: 0 0% 100% / 0.05; /* Hover state */
        
        /* Foreground (Text) Colors */
        --foreground: 0 0% 100%;            /* #FFFFFF - Primary text */
        --foreground-secondary: 0 0% 70%;   /* #B3B3B3 - Secondary text */
        --foreground-muted: 0 0% 50%;       /* #808080 - Muted text */
        --foreground-disabled: 0 0% 30%;    /* #4D4D4D - Disabled text */
        
        /* Brand Colors */
        --brand-primary: 348 70% 36%;       /* #9B1B30 - Burgundy accent */
        --brand-primary-hover: 348 70% 42%; /* Lighter burgundy */
        --brand-secondary: 0 0% 100%;       /* White */
        
        /* Semantic Colors */
        --success: 142 71% 45%;             /* #22C55E - Green */
        --success-muted: 142 71% 45% / 0.1;
        --warning: 38 92% 50%;              /* #F59E0B - Amber */
        --warning-muted: 38 92% 50% / 0.1;
        --destructive: 0 80% 55%;           /* #E33D3D - Red */
        --destructive-muted: 0 80% 55% / 0.1;
        --info: 188 78% 41%;                /* #14B8A6 - Cyan */
        --info-muted: 188 78% 41% / 0.1;
        
        /* Component Colors (Semantic Mapping) */
        --card: var(--background-secondary);
        --card-foreground: var(--foreground);
        --popover: var(--background-secondary);
        --popover-foreground: var(--foreground);
        --primary: var(--brand-primary);
        --primary-foreground: 0 0% 100%;
        --secondary: var(--background-tertiary);
        --secondary-foreground: var(--foreground);
        --muted: var(--background-tertiary);
        --muted-foreground: var(--foreground-muted);
        --accent: var(--brand-primary);
        --accent-foreground: var(--foreground);
        --destructive-foreground: var(--foreground);
        
        /* Border Colors */
        --border: 0 0% 100% / 0.08;         /* Default border */
        --border-muted: 0 0% 100% / 0.05;   /* Very subtle border */
        --border-emphasis: 0 0% 100% / 0.12; /* More visible border */
        --border-focus: var(--brand-primary);
        
        /* Input Colors */
        --input: var(--background-tertiary);
        --ring: var(--brand-primary);
        
        /* Glass Effect */
        --glass-border: rgba(255, 255, 255, 0.08);
        --glass-surface: rgba(255, 255, 255, 0.02);
        --glass-highlight: rgba(255, 255, 255, 0.05);
        
        /* ============================================
           DESIGN SYSTEM - SPACING & SIZING
           ============================================ */
        
        /* Border Radius */
        --radius: 1rem;                     /* 16px - Base radius */
        --radius-sm: 0.5rem;                /* 8px */
        --radius-md: 0.75rem;               /* 12px */
        --radius-lg: 1.5rem;                /* 24px */
        --radius-xl: 2rem;                  /* 32px */
        --radius-2xl: 2.5rem;               /* 40px - Glass panels */
        --radius-full: 9999px;              /* Fully rounded */
        
        /* ============================================
           DESIGN SYSTEM - MOTION & ANIMATION
           ============================================ */
        
        /* Easing Functions */
        --ease-default: cubic-bezier(0.4, 0, 0.2, 1);
        --ease-smooth: cubic-bezier(0.2, 0.8, 0.2, 1);  /* Liquid smooth */
        --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
        
        /* Transition Durations */
        --duration-fast: 150ms;
        --duration-normal: 300ms;
        --duration-slow: 600ms;
        
        /* Backdrop Filters */
        --backdrop-glass: blur(30px) saturate(100%);
        --backdrop-heavy: blur(40px) saturate(120%);
        --backdrop-light: blur(20px) saturate(100%);
        
        /* Legacy support (keeping for compatibility) */
        --ease-satin: var(--ease-smooth);
        --pale-slate: #C0C0C0;
        --bright-snow: #FFFFFF;
    }
}

@layer base {
    * {
        @apply border-border;
    }

    body {
        @apply bg-background text-foreground;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', sans-serif;
        font-feature-settings: "rlig" 1, "calt" 1;
        scrollbar-gutter: stable;

        /* MANDATORY: SMOOTHNESS */
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-weight: 500;
        /* Medium weight like Kortix */
        letter-spacing: -0.02em;
        /* Tighter letter spacing */
    }
}

@layer components {
    /* ============================================
       UNIFIED COMPONENT SYSTEM
       All reusable component styles in one place
       ============================================ */

    /* --- CARDS --- */
    .ui-card {
        @apply glass-panel p-6;
    }

    .ui-card-compact {
        @apply glass-panel p-4;
    }

    /* Legacy support */
    .metric-card {
        @apply glass-panel p-6;
    }

    /* --- LAYER 1: FILM GRAIN (FIXED) --- */
    .film-grain {
        @apply fixed inset-0 pointer-events-none z-[-1];
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        opacity: 0.015;
        /* 1.5% Opacity */
        mix-blend-mode: overlay;
        /* Blends nicely with darks */
        filter: blur(0.5px);
        /* Soften digital edges */
    }

    /* --- GLASS PANEL: LIQUID SMOOTH CARD --- */
    .glass-panel {
        @apply relative overflow-hidden;
        border-radius: var(--radius-2xl); /* 40px */

        /* Glass Surface with subtle gradient */
        background: linear-gradient(180deg,
                var(--glass-surface) 0%,
                rgba(255, 255, 255, 0.0) 40%);

        /* Anti-aliasing */
        background-clip: padding-box;

        /* Glass effect */
        backdrop-filter: var(--backdrop-glass);
        -webkit-backdrop-filter: var(--backdrop-glass);

        /* Border */
        border: 1px solid var(--glass-border);

        /* Shadow */
        box-shadow:
            0 40px 80px -20px rgba(0, 0, 0, 0.8),
            inset 0 0 40px 0 var(--glass-surface);

        /* Hardware Acceleration & Transitions */
        will-change: transform;
        transform: translateZ(0);
        transition: transform var(--duration-slow) var(--ease-smooth), 
                    box-shadow var(--duration-slow) var(--ease-smooth);
        transform-style: preserve-3d;
    }

    .glass-panel:hover {
        transform: translateY(-8px) translateZ(0) scale(1.01);
        box-shadow:
            0 50px 100px -20px rgba(0, 0, 0, 0.9),
            inset 0 0 60px 0 var(--glass-highlight);
        border-color: var(--glass-highlight);
    }

    /* --- ADVANCED LIQUID GLASS (Stand-out & Physical) --- */
    .btn-liquid-glass {
        @apply relative overflow-hidden rounded-full transition-all duration-700;
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(15px) saturate(200%);
        -webkit-backdrop-filter: blur(15px) saturate(200%);
        
        /* 1. Double Border for Edge Light (Fresnel Effect) */
        border: 1px solid rgba(255, 255, 255, 0.1);
        
        /* 2. Deep Internal Physics */
        box-shadow: 
            /* Inner glow at the top */
            inset 0 1px 1px 0 rgba(255, 255, 255, 0.2),
            /* Subtle brand tint in the depth */
            inset 0 0 20px 0 rgba(155, 27, 48, 0.05),
            /* Soft ambient drop */
            0 5px 15px -5px rgba(0, 0, 0, 0.4);
            
        color: rgba(255, 255, 255, 0.85);
        font-weight: 500;
        letter-spacing: 0.05em;
    }

    /* Moving Light Streak (Liquid Physics) */
    .btn-liquid-glass::after {
        content: '';
        @apply absolute inset-0 -translate-x-full transition-transform duration-1000;
        background: linear-gradient(
            90deg,
            transparent,
            rgba(255, 255, 255, 0.05),
            rgba(255, 255, 255, 0.1),
            rgba(255, 255, 255, 0.05),
            transparent
        );
    }

    .btn-liquid-glass:hover {
        background: rgba(255, 255, 255, 0.05);
        border-color: rgba(255, 255, 255, 0.3);
        color: #fff;
        transform: translateY(-2px);
        
        /* Bloom Effect */
        box-shadow: 
            inset 0 0 25px 0 rgba(255, 255, 255, 0.1),
            inset 0 0 10px 0 rgba(155, 27, 48, 0.1), /* Brand bloom */
            0 15px 30px -10px rgba(0, 0, 0, 0.6),
            0 0 20px 0 rgba(255, 255, 255, 0.05); /* External glow */
    }

    .btn-liquid-glass:hover::after {
        transform: translateX(100%);
    }

    .btn-liquid-glass:active {
        transform: scale(0.97);
        transition-duration: 100ms;
    }

}

@layer utilities {

    /* Text colors */
    .text-beige {
        color: #E5E5DC;
    }

    .text-number {
        color: #FFFFFF;
    }

    /* Smooth transitions */
    @media (prefers-reduced-motion: no-preference) {
        .transition-smooth {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
    }

    /* Smooth fade-in animation */
    .animate-fade-in {
        animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Smooth scale animation */
    .animate-scale-in {
        animation: scaleIn 0.2s ease-out;
    }

    @keyframes scaleIn {
        from {
            opacity: 0;
            transform: scale(0.95);
        }

        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    /* Mobile-first touch target utility */
    .touch-target {
        min-height: 44px;
        min-width: 44px;
    }

    /* Prevent horizontal overflow on mobile */
    .mobile-safe {
        max-width: 100%;
        overflow-x: hidden;
    }

    /* Safe area padding for notched phones */
    .safe-area-inset {
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
    }

    /* Mobile scrollable container with snap */
    .mobile-scroll-snap {
        @apply overflow-x-auto snap-x snap-mandatory;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
    }

    .mobile-scroll-snap::-webkit-scrollbar {
        display: none;
    }

    .snap-center-item {
        @apply snap-center shrink-0;
    }

    /* Hide scrollbar utility */
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    /* Mobile container - prevents overflow */
    .mobile-container {
        width: 100%;
        max-width: 100vw;
        overflow-x: hidden;
    }

    /* Responsive padding tokens */
    .responsive-padding {
        padding: 1rem;
    }

    @media (min-width: 768px) {
        .responsive-padding {
            padding: 1.5rem;
        }
    }

    @media (min-width: 1024px) {
        .responsive-padding {
            padding: 2rem;
        }
    }

    /* Prevent layout shift */
    .no-layout-shift {
        contain: layout;
    }

    /* Touch-friendly spacing */
    .touch-spacing {
        gap: 0.75rem;
    }

    @media (min-width: 768px) {
        .touch-spacing {
            gap: 1rem;
        }
    }
}

/* FORCE GLASS TABLES */
table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 8px;
    /* Gap between rows */
}

thead th {
    color: var(--pale-slate);
    font-weight: 500;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 12px 24px;
}

tbody tr {
    background: rgba(255, 255, 255, 0.03);
    transition: all 0.2s;
}

tbody tr:hover {
    background: rgba(255, 255, 255, 0.06);
}

td {
    padding: 16px 24px;
    color: var(--bright-snow);
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

tbody tr td:first-child {
    border-left: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 12px 0 0 12px;
}

tbody tr td:last-child {
    border-right: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 0 12px 12px 0;
}