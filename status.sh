#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
# Usage: ./status.sh

echo "üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—ç–∫–µ–Ω–¥–∞
echo "üîß –ë—ç–∫–µ–Ω–¥ (–ø–æ—Ä—Ç 8000):"
if lsof -ti:8000 > /dev/null 2>&1; then
    PID=$(lsof -ti:8000 | head -1)
    echo "   ‚úÖ –ó–∞–ø—É—â–µ–Ω (PID: $PID)"
    echo "   üåê URL: http://127.0.0.1:8000"
    echo "   üìñ Docs: http://127.0.0.1:8000/docs"
    
    # –¢–µ—Å—Ç API
    if curl -s http://127.0.0.1:8000/docs > /dev/null 2>&1; then
        echo "   ‚úÖ API –æ—Ç–≤–µ—á–∞–µ—Ç"
    else
        echo "   ‚ö†Ô∏è  API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç (–≤–æ–∑–º–æ–∂–Ω–æ, –µ—â–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è)"
    fi
else
    echo "   ‚ùå –ù–µ –∑–∞–ø—É—â–µ–Ω"
fi

echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
echo "üé® –§—Ä–æ–Ω—Ç–µ–Ω–¥ (–ø–æ—Ä—Ç 3000):"
if lsof -ti:3000 > /dev/null 2>&1; then
    PID=$(lsof -ti:3000 | head -1)
    echo "   ‚úÖ –ó–∞–ø—É—â–µ–Ω (PID: $PID)"
    echo "   üåê URL: http://localhost:3000"
    
    # –¢–µ—Å—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
    if curl -s http://localhost:3000 > /dev/null 2>&1; then
        echo "   ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–≤–µ—á–∞–µ—Ç"
    else
        echo "   ‚ö†Ô∏è  –§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç (–≤–æ–∑–º–æ–∂–Ω–æ, –µ—â–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è)"
    fi
else
    echo "   ‚ùå –ù–µ –∑–∞–ø—É—â–µ–Ω"
fi

echo ""
echo "üìã –õ–æ–≥–∏:"
echo "   ‚Ä¢ –ë—ç–∫–µ–Ω–¥:  tail -f backend.log"
echo "   ‚Ä¢ –§—Ä–æ–Ω—Ç–µ–Ω–¥: tail -f frontend.log"
echo ""
